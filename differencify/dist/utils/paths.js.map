{"version":3,"sources":["../../src/utils/paths.js"],"names":["getTestRoot","testConfig","globalConfig","testRoot","isJest","path","dirname","testPath","resolve","pkgDir","sync","imageSnapshotPath","fs","existsSync","mkdirSync","getSanitizedName","name","replace","getSnapshotsDir","join","getDiffDir","snapshotsDir","getSnapshotPath","Error","testName","imageType","getDiffPath","diffDir","getCurrentImageDir","getCurrentImagePath","currentImageDir"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,cAAc,CAACC,UAAD,EAAaC,YAAb,KAA8B;AAChD,MAAIC,QAAJ;AACA,MAAIF,WAAWG,MAAf,EAAuB;AACrBD,eAAWE,eAAKC,OAAL,CAAaL,WAAWM,QAAxB,CAAX;AACD,GAFD,MAEO;AACLJ,eAAWE,eAAKG,OAAL,CAAaC,iBAAOC,IAAP,EAAb,EAA4BR,aAAaS,iBAAzC,CAAX;AACD;AACD,MAAI,CAACC,aAAGC,UAAH,CAAcV,QAAd,CAAL,EAA8B;AAC5BS,iBAAGE,SAAH,CAAaX,QAAb;AACD;AACD,SAAOA,QAAP;AACD,CAXD;;AAaA,MAAMY,mBAAmBC,QAAQA,KAAKC,OAAL,CAAa,KAAb,EAAoB,GAApB,CAAjC;;AAEO,MAAMC,4CAAkB,CAACjB,UAAD,EAAaC,YAAb,KAA8BG,eAAKc,IAAL,CAC3DnB,YAAYC,UAAZ,EAAwBC,YAAxB,CAD2D,EAE3D,qBAF2D,CAAtD;;AAKA,MAAMkB,kCAAaC,gBAAgBhB,eAAKc,IAAL,CAAUE,YAAV,EAAwB,2BAAxB,CAAnC;;AAEA,MAAMC,4CAAkB,CAACD,YAAD,EAAepB,UAAf,KAA8B;AAC3D,MAAI,CAACoB,YAAD,IAAiB,CAACpB,UAAtB,EAAkC;AAChC,UAAM,IAAIsB,KAAJ,CAAU,+CAAV,CAAN;AACD;AACD,QAAMC,WAAWT,iBAAiBd,WAAWuB,QAA5B,CAAjB;AACA,SAAOnB,eAAKc,IAAL,CAAUE,YAAV,EAAyB,GAAEG,QAAS,SAAQvB,WAAWwB,SAAX,IAAwB,KAAM,EAA1E,CAAP;AACD,CANM;;AAQA,MAAMC,oCAAc,CAACC,OAAD,EAAU1B,UAAV,KAAyB;AAClD,MAAI,CAAC0B,OAAD,IAAY,CAAC1B,UAAjB,EAA6B;AAC3B,UAAM,IAAIsB,KAAJ,CAAU,2CAAV,CAAN;AACD;AACD,QAAMC,WAAWT,iBAAiBd,WAAWuB,QAA5B,CAAjB;AACA,SAAOnB,eAAKc,IAAL,CAAUQ,OAAV,EAAoB,GAAEH,QAAS,mBAAkBvB,WAAWwB,SAAX,IAAwB,KAAM,EAA/E,CAAP;AACD,CANM;;AAQA,MAAMG,kDAAqBP,gBAAgBhB,eAAKc,IAAL,CAAUE,YAAV,EAAwB,oBAAxB,CAA3C;;AAEA,MAAMQ,oDAAsB,CAACC,eAAD,EAAkB7B,UAAlB,KAAiC;AAClE,MAAI,CAAC6B,eAAD,IAAoB,CAAC7B,UAAzB,EAAqC;AACnC,UAAM,IAAIsB,KAAJ,CAAU,2CAAV,CAAN;AACD;AACD,QAAMC,WAAWT,iBAAiBd,WAAWuB,QAA5B,CAAjB;AACA,SAAOnB,eAAKc,IAAL,CAAUW,eAAV,EAA4B,GAAEN,QAAS,YAAWvB,WAAWwB,SAAX,IAAwB,KAAM,EAAhF,CAAP;AACD,CANM","file":"paths.js","sourcesContent":["import path from 'path';\nimport pkgDir from 'pkg-dir';\nimport fs from 'fs';\n\nconst getTestRoot = (testConfig, globalConfig) => {\n  let testRoot;\n  if (testConfig.isJest) {\n    testRoot = path.dirname(testConfig.testPath);\n  } else {\n    testRoot = path.resolve(pkgDir.sync(), globalConfig.imageSnapshotPath);\n  }\n  if (!fs.existsSync(testRoot)) {\n    fs.mkdirSync(testRoot);\n  }\n  return testRoot;\n};\n\nconst getSanitizedName = name => name.replace(/\\//g, '-');\n\nexport const getSnapshotsDir = (testConfig, globalConfig) => path.join(\n  getTestRoot(testConfig, globalConfig),\n  '__image_snapshots__',\n);\n\nexport const getDiffDir = snapshotsDir => path.join(snapshotsDir, '__differencified_output__');\n\nexport const getSnapshotPath = (snapshotsDir, testConfig) => {\n  if (!snapshotsDir || !testConfig) {\n    throw new Error('Incorrect arguments passed to getSnapshotPath');\n  }\n  const testName = getSanitizedName(testConfig.testName);\n  return path.join(snapshotsDir, `${testName}.snap.${testConfig.imageType || 'png'}`);\n};\n\nexport const getDiffPath = (diffDir, testConfig) => {\n  if (!diffDir || !testConfig) {\n    throw new Error('Incorrect arguments passed to getDiffPath');\n  }\n  const testName = getSanitizedName(testConfig.testName);\n  return path.join(diffDir, `${testName}.differencified.${testConfig.imageType || 'png'}`);\n};\n\nexport const getCurrentImageDir = snapshotsDir => path.join(snapshotsDir, '__current_output__');\n\nexport const getCurrentImagePath = (currentImageDir, testConfig) => {\n  if (!currentImageDir || !testConfig) {\n    throw new Error('Incorrect arguments passed to getDiffPath');\n  }\n  const testName = getSanitizedName(testConfig.testName);\n  return path.join(currentImageDir, `${testName}.current.${testConfig.imageType || 'png'}`);\n};\n"]}